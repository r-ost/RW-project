\documentclass{article}

% Language setting
% Replace `english' with e.g. `spanish' to change the document language
\usepackage[polish]{babel}
\usepackage{polski}
\usepackage[utf8]{inputenc}
\usepackage{longtable}
\usepackage{array}
\usepackage{enumitem}
\usepackage{makecell}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{float}
\usepackage{listings}
\usepackage[colorlinks=true, linkcolor=black]{hyperref}
\usepackage[letterpaper,top=2cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

\renewcommand{\familydefault}{\sfdefault}

\setcounter{tocdepth}{2}

\title{Projekt 2: Scenariusze działań \\ \large{Dokumentacja wstępna}}
\author{Damian Kąkol
	\and Piotr Komisarczyk
	\and Jan Kruszewski
	\and Aliaksandr Kulaha
	\and Kacper Leszczyński
	\and Michalina Majewska
	\and Adrian Rudź
	\and Jan Szablanowski}

\begin{document}
\maketitle
\tableofcontents

\newpage

\section{Cel projektu}
Celem projektu jest stworzenie aplikacji do definiowania i analizy systemów dynamicznych należących do pewnej klasy, będącej rozszerzeniem klasy systemów dynamicznych opisywanych językiem $\mathcal{AL}$.
Rozszerzenie to polega na dodaniu warunków o dowolnej długości czasu trwania akcji. W ramach projektu zostaną opracowane i zaimplementowane:
\begin{itemize}
	\item język akcji, który pozwoli na definiowanie scenariuszy systemów dynamicznych,
	\item język kwerend, który pozwoli na zadawanie pytań do zdefiniowanego scenariusza.
\end{itemize}	


\section{Język akcji}

\subsection{Opis języka $\mathcal{AL}$}
\label{sec:opis-jezyka-al}

Action Language $\mathcal{AL}$ to język formalny służący do modelowania systemów dynamicznych. Pozwala na reprezentację akcji, ich efektów oraz zależności czasowych pomiędzy nimi. $\mathcal{AL}$ zakłada liniowy model czasu i umożliwia analizę konsekwencji wykonywanych działań.

\subsubsection{Podstawowe założenia}
\begin{itemize}
    \item Prawo inercji
    \item Model czasu jest liniowy i dyskretny
    \item Akcje mają określony czas działania; podczas ich wykonywania wartości fluentów zmienianych przez te akcje są nieznane.
    \item Dynamiczne efekty akcji - jedna akcja może wywołać kolejną po upływie pewnego czasu od jej zakończenia.
    \item Sytuacja może wyzwalać akcje – niektóre stany mogą powodować wykonanie pewnych akcji.
\end{itemize}

\noindent Język $\mathcal{AL}$ spełnia powyższe założenia oraz dodatkowo zakłada, że każda akcja jest wykonywana w 1 jednostce czasu. W ramach projektu zostanie zaimplementowany język $\mathcal{AL}$ z dodatkowym założeniem o dowolnej długości czasu akcji. W następnych sekcjach zostanie opisana składnia $\mathcal{AL}$.

\subsubsection{Składnia języka $\mathcal{AL}$}

Podstawowe elementy języka $\mathcal{AL}$ to:
\begin{itemize}
    \item $F$ – zbiór fluentów, czyli zmiennych opisujących stan świata.
    \item $Ac$ – zbiór akcji, które mogą być wykonywane.
    \item Formuły logiczne – zdania określające warunki i efekty akcji.
\end{itemize}

\noindent W podstawowym języku $\mathcal{AL}$ wyróżnione są różne rodzaje zdań. Poniżej zostaną przedstawione możliwe zdania oraz ich zapis w języku $\mathcal{AL}$.
\begin{itemize}
    \item Gdy akcja $A$ znajdzie się w stanie spełniającym $\pi$, prowadzi do stanu spełniającego $\alpha$
    \begin{equation}
     A \text{ causes } \alpha \text{ if } \pi
    \end{equation}

    \item Akcja $A$ powoduje wykonanie akcji $B$ po $t$ chwilach czasu od zakończenia $A$, gdy zachodzi stan spełniający $\pi$
    \begin{equation}
        A \text{ invokes } B \text{ after } t \text{ if } \pi
    \end{equation}

    \item Gdy akcja $A$ znajdzie się w stanie spełniającym $\pi$ po jej wykonaniu wartość fluentu może, ale nie musi się zmienić
    \begin{equation}
        A \text{ releases } f \text{ if } \pi
    \end{equation}

    \item Gdy spełniony jest warunek $\pi$, akcja $A$ jest wykonywana.
    \begin{equation}
        \pi \text{ triggers } A
    \end{equation}
\end{itemize}

\subsubsection{Semantyka języka $\mathcal{AL}$}
Model $\mathcal{AL}$ to struktura:
$$S = (H, O, E)$$
Gdzie:
\begin{itemize}
    \item $H$ – funkcja historii stanów,
    \item $O$ – funkcja occlusion (określa, które fluenty mogą się zmieniać w wyniku akcji),
    \item $E$ – relacja określająca wystąpienia akcji.
\end{itemize}

\subsection{Rozszerzenie języka $\mathcal{AL}$ o durations}
\label{sec:opis-jezyka-al-z-durations}

Poza podstawowymi założeniami zdefiniowanymi w sekcji \ref{sec:opis-jezyka-al}, język akcji zaimplementowany w ramach projektu będzie zawierał dodatkowe założenie o czasie trwania akcji. Każda akcja będzie opisana parą $(A, d)$, gdzie $A$ to nazwa akcja, a $d$ to czas trwania akcji.
\\ \\
Rozszerzony język akcji będzie dawał również możliwość zdefiniowania zdań o niemożliwości wykonania akcji w danym punkcie czasu albo przy zajściu pewnego warunku logicznego. 
\\ \\
Poniżej zostaną przedstawione możliwe zdania oraz ich zapis w w rozszerzonym języku $\mathcal{AL}$ o durations.
\begin{itemize}
    \item Gdy akcja $A$ o czasie trwania $d$ znajdzie się w stanie spełniającym $\pi$, prowadzi do stanu spełniającego $\alpha$
    \begin{equation}
     	(A, d) \text{ causes } \alpha \text{ if } \pi
    \end{equation}

    \item Akcja $A$ o czasie trwania $d_1$ powoduje wykonanie akcji $B$ (o czasie trwania $d_2$) po $t$ chwilach czasu od zakończenia $A$, gdy zachodzi stan spełniający $\pi$
    \begin{equation}
    	(A, d_1) \text{ invokes } (B, d_2) \text{ after } t \text{ if } \pi
    \end{equation}

    \item Gdy akcja $A$ o czasie trwania $d$ znajdzie się w stanie spełniającym $\pi$ po jej wykonaniu wartość fluentu może, ale nie musi się zmienić
    \begin{equation}
        (A, d) \text{ releases } f \text{ if } \pi
    \end{equation}

    \item Gdy spełniony jest warunek $\pi$, akcja $A$ o czasie trwania $d$ jest wykonywana.
    \begin{equation}
        \pi \text{ triggers } (A, d)
    \end{equation}

	\item Akcja $A$ o czasie trwania $d$ nie może być wykonana w chwili $t$.
    \begin{equation}
		\text{impossible } (A, d) \text{ at } t
    \end{equation}

	\item Akcja $A$ o czasie trwania $d$ nie może być wykonana, gdy spełniony jest warunek $\pi$.
	\begin{equation}
		\text{impossible } (A, d) \text{ if } \pi
	\end{equation}
\end{itemize}

\section{Scenariusze działań}
Scenariuszem nazywamy parę $Sc = (Obs, Acs)$, gdzie:
\begin{itemize}
	\item $Obs$ to zbiór obserwacji $Obs = {(\alpha_1, t_1), ..., (\alpha_n, t_n)}$, czyli zbiór formuł $\alpha_i$, które są obserwowane w trakcie realizacji scenariusza w czasie $t_i$.
	\item $Acs$ to zbiór akcji o określonym czasie trwania $Acs = {((A_1, d_1), t_1), ..., ((A_n, d_n), t_n)}$, które są wykonywane w trakcie realizacji scenariusza w czasie $t_i$.
\end{itemize}

\noindent Dodatkowo w scenariuszach rozważanych w projekcie mogą występować akcje nienależące do zbioru $Acs$, które są efektem wykonania innych akcji. W ramach projektu scenariusze będą definiowane w języku akcji z durations, opisanym w sekcji \ref{sec:opis-jezyka-al-z-durations}.

\section{Język kwerend}

\subsection{Opis}
Język kwerend pozwala na zadawanie pytań w danej klasie systemów dynamicznych. Kwerenda to zdanie logiczne. Mówimy, że kwerenda jest spełniona, gdy przyjmuje wartość prawdziwą.

W ramach projektu zostanie zaimplementowany język kwerend, który pozwoli na uzyskanie odpowiedzi na następujące pytania:
\begin{itemize}
    \item \textbf{Czy scenariusz $Sc$ jest możliwy do realizacji?}\\
    Scenariusz $Sc$ jest możliwy do realizacji, jeśli istnieje dla niego model w zadanej dziedzinie.
    \item \textbf{Czy w chwili $t$ realizacji scenariusza $Sc$ zawsze/kiedykolwiek wykonywana jest akcja $A$?}\\
    Przyjmuje się, że akcja $A$ jest wykonywana w chwilach $t_0+1$, $t_0+2$, \ldots, $t_0+d$,\\
    gdzie $t_0$ to początek trwania akcji, a $d$ to długość jej trwania.\\
    Akcja $A$ jest wykonywana zawsze, jeśli jest wykonywana w chwili $t$ realizacji scenariusza $Sc$ w każdym możliwym modelu.\\
    Akcja $A$ jest wykonywana kiedykolwiek, jeśli istnieje model, w którym jest wykonywana w chwili $t$ realizacji scenariusza $Sc$.
    \item \textbf{Czy w chwili $t \ge 0$ realizacji scenariusza $Sc$ warunek $\gamma$ zachodzi zawsze/kiedykolwiek?}\\
    Warunek $\gamma$ zachodzi zawsze, jeśli jest spełniony w chwili $t$ realizacji scenariusza $Sc$ w każdym możliwym modelu.\\
    Warunek $\gamma$ zachodzi kiedykolwiek, jeśli istnieje model, w którym jest spełniony w chwili $t$ realizacji scenariusza $Sc$.
\end{itemize}

\subsection{Dodatkowe założenia}
Przyjmuje się, że:
\begin{itemize}
    \item Akcje nie mogą zaczynać się w czasie $t < 0$. Zapytania o stan systemu sprzed chwili $t = 0$ są uznawane za niepoprawne. Ponadto warto zauważyć, że akcje mogą rozpoczynać się w chwili $t = 0$, jednak żadna akcja nie może być wykonywana w chwili $t = 0$.
    \item Od momentu zakończenia ostatniej akcji, stan systemu pozostaje niezmieniony. Zapytanie o stan dla danego scenariusza $Sc$ i modelu $M$ w chwili $t > t_{end}$, gdzie $t_{end}$ - moment zakończenia ostatniej akcji, jest równoważne z zapytaniem o stan w chwili $t_{end}$.
\end{itemize}

\subsection{Składnia języka kwerend}
\begin{itemize}
    \item $Possibly\ Sc$ – zapytanie o możliwość realizacji scenariusza $Sc$.
    \item $Always\ A\ at\ t\ when\ Sc$ – zapytanie, czy w chwili $t$ realizacji scenariusza $Sc$ zawsze wykonywana jest akcja $A$.
    \item $Possibly\ A\ at\ t\ when\ Sc$ – zapytanie, czy w chwili $t$ realizacji scenariusza $Sc$ kiedykolwiek wykonywana jest akcja $A$.
    \item $Always\ \gamma\ at\ t\ when\ Sc$ – zapytanie, czy w chwili $t$ realizacji scenariusza $Sc$ warunek $\gamma$ zachodzi zawsze.
    \item $Possibly\ \gamma\ at\ t\ when\ Sc$ – zapytanie, czy w chwili $t$ realizacji scenariusza $Sc$ warunek $\gamma$ zachodzi kiedykolwiek.
\end{itemize}

\section{Przykłady}
% TODO: Piotr

\section{Interfejs użytkownika}
% TODO: Jan K.

\section{Bibliografia}

\end{document}